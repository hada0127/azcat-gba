# azcat.swf 게임 분석 리포트

## 기본 정보

| 항목 | 내용 |
|------|------|
| 게임명 | **아! 고양이를 피해라 대왕** |
| 개발 | Cherry Project (taRu군) |
| 제작연도 | 2003년 |
| 플랫폼 | Flash SWF (gp32 기종용) |
| 사용 폰트 | 굴림 |
| 해상도 | 약 320x240 (피처폰/gp32 규격) |
| 홈페이지 | cherryp.egloos.com |

---

## 게임 개요

하늘에서 떨어지는 고양이를 좌우로 이동하며 피하는 횡스크롤 회피 게임이다.
고양이가 바닥에 착지하면 점수 +1이 되며, 플레이어에게 맞으면 HP가 감소한다.
점수가 오를수록 고양이 수와 낙하 속도가 증가하여 난이도가 상승한다.

---

## 화면 구성 (메인 타임라인)

| 프레임 | 레이블 | 설명 |
|--------|--------|------|
| 1 | (init) | 품질 설정 (SetQuality "high") |
| 15 | title | 타이틀 화면 초기화, 하이스코어 로드 (GetPersistentData) |
| 23 | title_loop | 타이틀 루프 |
| 28 | play_init | 게임 초기화 (변수 리셋, 고양이 배치) |
| 46 | (game loop) | 게임 플레이 루프 (stop) |
| 51 | gameover | 게임오버 처리 (점수 계산, 등급 판정, 하이스코어 저장) |
| 61 | gameover_loop | 게임오버 루프 |
| 70 | (cherry init) | 품질 설정 |
| 78 | cherry_loop | Cherry Project 소개 화면 |
| 90 | menual_loop | 매뉴얼(조작법 설명) 화면 |

---

## 조작법

### 타이틀 화면 (Button_4)

| 키 | 동작 |
|----|------|
| 좌 방향키 | 매뉴얼 화면으로 이동 |
| 우 방향키 | 게임 시작 (play_init) |
| 아래 방향키 | Cherry Project 소개 화면 |

### 게임 플레이 (Button_78)

| 키 | 동작 |
|----|------|
| 좌 방향키 | 왼쪽 이동 (가속 이동) |
| 우 방향키 | 오른쪽 이동 (가속 이동) |
| 아래 방향키 | 이동 정지 |
| PageUp | 전멸 폭탄 사용 |

### 게임오버 화면 (Button_80)

| 키 | 동작 |
|----|------|
| 좌 방향키 | 타이틀로 돌아가기 |
| 우 방향키 | 재도전 (play_init) |

### Cherry Project 소개 (Button_127)

| 키 | 동작 |
|----|------|
| 좌 방향키 | 타이틀로 돌아가기 |

---

## 게임 변수

| 변수명 | 초기값 | 설명 |
|--------|--------|------|
| `player_life` | 3 | 플레이어 HP (최대 3) |
| `score` | 0 | 현재 점수 |
| `hiscore` | 0 | 최고 점수 (PersistentData에 저장) |
| `player_accel` | 0 | 플레이어 추가 이동속도 (아이템으로 증가, 최대 4) |
| `bomb_have` | 0 | 폭탄 보유 여부 (0/1) |
| `bomb_use` | 0 | 폭탄 사용중 여부 (0/1) |
| `v_cat_qty` | 0 | 활성화된 고양이 수 (최대 43) |
| `v_cat_accel` | 1 | 고양이 추가 낙하 속도 (최대 17) |
| `v_player_direction` | left | 플레이어 현재 방향 |
| `item_type` | - | 현재 아이템 종류 (1~4) |
| `item_cnt` | 0 | 아이템 출현 카운터 (150 초과시 아이템 출현) |

---

## 플레이어 시스템

### 이동 (Sprite_68)

- **상태**: stop_left, stop_right, left, right, dead
- **이동 공식**: `X += 5 + v_accel + player_accel` (v_accel은 누적 가속도, +0.2/프레임)
- **이동 범위**: X 좌표 0 ~ 189
- **초기 위치**: X = 93 (화면 중앙)
- 폭탄 사용 중에는 이동 불가

### 생명력 (Sprite_36 / Sprite_77)

- **최대 HP**: 3
- **사망 조건**: HP < 1 → gameover
- **HP 표시**: 화면 우측 상단 캐릭터 얼굴 + 생명력 아이콘
  - life3: 헤헤.. (여유 표정)
  - life2: (보통 표정)
  - life1: (위험 표정)
  - dead: 사망 → 게임오버

---

## 고양이 시스템 (Sprite_55)

- **총 고양이 수**: 33개 (cat0 ~ cat32), 점수에 따라 활성화 수 증가
- **출현 위치**: 랜덤 X (1~205), 화면 위쪽 밖 (-32 ~ -192)
- **낙하 공식**: `Y += 1 + v_accel + v_cat_accel` (v_accel += 0.5/프레임)
- **착지**: Y > 200 도달 시 → `score += 1`, "sit" 상태 진입
- **충돌 판정**: Y가 170~190 구간에서 플레이어 히트박스와 X축 겹침 검사
- **피격 시**: `player_life -= 1`, 해당 고양이 제거 (Y=250)
- **폭탄 반응**: `bomb_use == 1`이면 모든 고양이 즉시 제거 (Y=250)
- **활성화**: `move_flag`로 제어 (v_cat_qty 이상이면 "no"로 비활성)

---

## 아이템 시스템 (Sprite_47)

### 출현 조건

- `item_cnt`가 매 프레임 +1 증가
- `item_cnt > 149`가 되면 아이템 출현 (약 150프레임마다)
- 출현 위치: 랜덤 X (1~205), Y = -40
- 낙하 공식: `Y += 1 + v_accel` (v_accel += 0.5/프레임)

### 아이템 종류 (랜덤 1~4)

| 타입 | 이름 | 효과 | 초과시 |
|------|------|------|--------|
| i1 | 체력회복 | HP +1 (최대 3) | score +5 |
| i2 | 전멸폭탄 | 폭탄 획득 (최대 1개 보유) | score +5 |
| i3 | HP 감소 | HP -1 (최소 1, 사망하지 않음) | score -5 |
| i4 | 속도업 | player_accel +1 (최대 4) | score +5 |

### 바닥 체류

- 바닥(Y=207)에 도달하면 정지
- 45프레임 후 자동 소멸 (v_sit_cnt >= 45)

### 획득 판정

- 고양이와 동일한 히트박스 겹침 검사 방식
- 획득 시 아이템챗(Sprite_22) 텍스트 표시

---

## 폭탄 시스템 (Sprite_13)

- **획득**: 아이템 i2를 획득하면 `bomb_have = 1`
- **사용**: PageUp 키 입력 시 `bomb_have = 1`이면 발동
- **효과**: 화면 내 모든 고양이 즉시 제거
- **애니메이션**: 41프레임 폭발 이펙트 (Sprite_13)
- **복구**: 폭발 애니메이션 종료 시 `bomb_use = 0`으로 리셋
- **사용 중 제약**: 플레이어 이동 불가, 고양이/아이템 낙하 정지
- **상태 표시**: 화면 우측에 폭탄 보유 아이콘 (status_bomb)

---

## 난이도 곡선 (Sprite_77 frame_2)

점수에 따라 활성 고양이 수(`v_cat_qty`)와 낙하 가속도(`v_cat_accel`)가 단계적으로 증가한다.

### 고양이 수 변화

| 점수 구간 | 활성 고양이 수 |
|-----------|---------------|
| 0~1 | 0 |
| 1~2 | 1 |
| 2~5 | 2 |
| 5~20 | 3 |
| 20~30 | 4 |
| 30~80 | 5 |
| 80~150 | 6 |
| 150~220 | 8 |
| 220~500 | 10~14 |
| 500~550 | 17 |
| 550~600 | 19 |
| 600~650 | 21 |
| 650~750 | 23 |
| 750~850 | 25 |
| 850~900 | 28 |
| 900~960 | 30 |
| 960~1010 | 35 |
| 1010~1040 | 40~42 |
| 1040+ | 43 (최대) |

### 낙하 속도 변화

| 점수 구간 | v_cat_accel |
|-----------|-------------|
| 0~10 | 1 |
| 10~50 | 2 |
| 50~100 | 3 |
| 100~200 | 4 |
| 200~240 | 5 |
| 240~280 | 6 |
| 280~360 | 7 |
| 360~400 | 8 |
| 400~450 | 9 |
| 450~700 | 10 |
| 700~800 | 11 |
| 800~920 | 12 |
| 920~940 | 13 |
| 940~980 | 14 |
| 980~990 | 16 |
| 990+ | 17 (최대) |

### 배경 변화

| 점수 | 배경 |
|------|------|
| 0~500 | 기본 (낮 배경) |
| 500~900 | night (밤 배경) |
| 900+ | matrix (매트릭스 배경) |

---

## 등급 시스템 (Sprite_125)

게임오버 시 점수에 따라 등급이 부여된다. 하이스코어 갱신 시 PersistentData에 저장된다.

| 등급 코드 | 점수 범위 | 등급명 |
|-----------|-----------|--------|
| g10 | 0~10 | 10급 해상 |
| g9 | 10~20 | 9급 (미확인) |
| g8 | 20~30 | 8급 성게 |
| g7 | 30~40 | 7급 (미확인) |
| g6 | 40~50 | 6급 (미확인) |
| g5 | 50~60 | 5급 (미확인) |
| g4 | 60~70 | 4급 소령 |
| g3 | 70~80 | 3급 (미확인) |
| g2 | 80~90 | 2급 (미확인) |
| g1 | 90~100 | 1급 점복 |
| d1 | 100~200 | (단급) |
| d2 | 200~300 | (단급) |
| d3 | 300~400 | (단급) |
| d4 | 400~500 | 4단 소령 |
| d5 | 500~600 | (단급) |
| d6 | 600~700 | (단급) |
| d7 | 700~800 | (단급) |
| d8 | 800~900 | (단급) |
| d9 | 900~1000 | (단급) |
| d10 | 1000~3000 | 10단 대왕 |
| d100 | 3000+ | (최고 등급) |

---

## 스프라이트 구성

| 스프라이트 | 프레임 수 | 역할 |
|-----------|-----------|------|
| Sprite_13 | 41 | 폭탄 폭발 이펙트 |
| Sprite_22 | 37 | 아이템 획득 시 텍스트 말풍선 ("아! 힘내자!!!", "이리와 미야", "멍...", "아냐님 스텝!" 등) |
| Sprite_25 | 22 | 아이템 외형 표시 (i1~i4) |
| Sprite_36 | 30 | 캐릭터 얼굴 표정 (HP 상태에 따라 변화) |
| Sprite_45 | 26 | 고양이 스프라이트 (보조) |
| Sprite_47 | 32 | 아이템 이동 및 충돌 처리 (핵심 아이템 로직) |
| Sprite_55 | 25 | 고양이 이동 및 충돌 처리 (핵심 고양이 로직) |
| Sprite_59 | - | 히트박스 (파란 사각형) |
| Sprite_65 | - | 플레이어 캐릭터 외형 |
| Sprite_68 | 47 | 플레이어 이동 컨트롤러 (left/right/stop/dead) |
| Sprite_73 | 18 | 배경 관련 |
| Sprite_77 | 3 | 게임 루프 컨트롤러 (HP 체크, 난이도 조절, 고양이 활성화) |
| Sprite_125 | 157+ | 등급 표시 (10급~10단+) |

---

## 리소스 목록

### 이미지 (50개)

| 형식 | 파일 | 비고 |
|------|------|------|
| JPG | 1, 8, 10, 69, 71, 74, 130 | 배경, 캐릭터 원화 등 (비손실 아님) |
| PNG (Lossless) | 14, 16, 18, 20, 23, 128 | 투명도 없는 비트맵 |
| PNG (Lossless2) | 28, 30, 32, 34, 37, 39, 41, 43, 48, 50, 52, 56, 61, 63, 66, 81~123(홀수), 128 | 알파 채널 포함 (스프라이트용) |

### 사운드 (6개)

| 파일 | 타입 | 추정 용도 |
|------|------|-----------|
| -1.wav | SoundStreamHead2 | 스트리밍 BGM (타이틀 또는 인게임) |
| 12.mp3 | DefineSound | 효과음/BGM |
| 46.mp3 | DefineSound | 효과음/BGM |
| 54.mp3 | DefineSound | 효과음/BGM |
| 79.mp3 | DefineSound | 효과음/BGM |
| 126.mp3 | DefineSound | 효과음/BGM |

### 셰이프 (54개)

- SVG 형식으로 내보내기됨
- 배경, UI 요소, 히트박스, 장식 등

### 폰트 (1개)

- `5_굴림.ttf` - 게임 내 텍스트에 사용

### 텍스트 (3개)

| ID | 내용 | 용도 |
|----|------|------|
| 6 | "HISCORE" | 타이틀 화면 하이스코어 라벨 |
| 7 | "0000000" | 하이스코어 수치 표시 (변수: hiscore_view) |
| 27 | "0" | 인게임 점수 표시 (변수: score) |

### 프레임 (98개)

- 메인 타임라인의 전체 98프레임을 PNG로 내보내기

### 버튼 (4개)

| 버튼 | 사용 화면 |
|------|-----------|
| Button_4 | 타이틀 화면 네비게이션 |
| Button_78 | 게임 플레이 조작 |
| Button_80 | 게임오버 화면 네비게이션 |
| Button_127 | Cherry Project 소개 화면 네비게이션 |

---

## 게임 흐름 요약

```
[SWF 로드]
    │
    ▼
[frame_1] SetQuality "high"
    │
    ▼
[frame_15] 하이스코어 로드 → 타이틀 화면
    │
    ├─ 좌 → [frame_90] 매뉴얼 화면 ─ 좌 → 타이틀
    ├─ 아래 → [frame_78] Cherry Project 소개 ─ 좌 → 타이틀
    └─ 우 → [frame_28] 게임 초기화
                │
                ▼
          [frame_46] 게임 플레이 루프
           ┌────────────────────────────────┐
           │  Sprite_77: 매 프레임 실행      │
           │  - HP 체크 (0이면 → gameover)   │
           │  - 점수 기반 난이도 조절         │
           │  - 고양이 활성화 제어            │
           │  - 아이템 카운터 증가            │
           │  - 배경 변경 (night/matrix)      │
           ├────────────────────────────────┤
           │  Sprite_55 x33: 고양이 낙하     │
           │  Sprite_47: 아이템 낙하          │
           │  Sprite_68: 플레이어 이동        │
           └────────────────────────────────┘
                │
                ▼ (HP < 1)
          [frame_51] 게임오버
           - 하이스코어 갱신 체크
           - 등급 판정 (g10~d100)
                │
                ├─ 좌 → 타이틀
                └─ 우 → 재도전
```

---

## 핵심 로직 파일 위치

| 파일 경로 | 내용 |
|-----------|------|
| `scripts/frame_28/DoAction.as` | 게임 초기화 (변수 리셋, 플레이어/아이템/폭탄 초기화) |
| `scripts/frame_51/DoAction.as` | 게임오버 처리 (하이스코어, 등급 분기) |
| `scripts/DefineSprite_77/frame_2/DoAction.as` | 게임 루프 핵심 (HP 체크, 난이도 곡선, 고양이 활성화) |
| `scripts/DefineSprite_55/frame_1/DoAction.as` | 고양이 낙하/충돌/점수 로직 |
| `scripts/DefineSprite_47/frame_1/DoAction.as` | 아이템 낙하/획득 판정 |
| `scripts/DefineSprite_47/frame_23/DoAction.as` | 아이템 효과 적용 (i1~i4 분기) |
| `scripts/DefineSprite_68/frame_26/DoAction.as` | 플레이어 좌측 이동 |
| `scripts/DefineSprite_68/frame_38/DoAction.as` | 플레이어 우측 이동 |
| `scripts/DefineButton2_78/*.as` | 게임 플레이 키 입력 처리 |

---

## 내보내기 폴더 구조

```
export/
├── buttons/        # 버튼 (4개)
├── fonts/          # 폰트 - 굴림.ttf
├── frames/         # 메인 타임라인 프레임 캡처 (98개 PNG)
├── images/         # 비트맵 이미지 (50개 JPG/PNG)
├── morphshapes/    # 모프셰이프 (없음)
├── movies/         # 무비 (없음)
├── scripts/        # ActionScript 소스코드 (78개 .as 파일)
├── shapes/         # 벡터 셰이프 (54개 SVG)
├── sounds/         # 사운드 (6개 MP3/WAV)
├── sprites/        # 스프라이트 프레임 캡처 (13개 스프라이트)
└── texts/          # 텍스트 필드 (3개)
```
